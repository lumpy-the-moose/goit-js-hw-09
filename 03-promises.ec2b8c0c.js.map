{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAWF,SAASC,cAAc,aAClCE,EAAQH,SAASC,cAAc,kBAC/BG,EAAOJ,SAASC,cAAc,iBAC9BI,EAASL,SAASC,cAAc,mBAChCK,EAAeN,SAASC,cAAc,mBAE5CF,EAAKQ,iBAAiB,UAAUC,GAAKA,EAAEC,mBAEvCH,EAAaC,iBAAiB,SAAS,KACrC,KAAMJ,EAAMO,OAAS,GAAKN,EAAKM,OAAS,GAAKL,EAAOK,MAAQ,GAC1D,OAGFR,EAASS,aAAa,YAAY,GAElC,IAAIC,EAAW,EAEf,MAAMC,EAAWC,YAAW,SAASC,IA2BvC,IAAuBC,EAAUC,EA1BzBL,GAAYP,EAAOK,SA0BJM,EAzBHJ,EAyBaK,GAzBFd,EAAMO,MAAQN,EAAKM,OAASE,EAAW,GA0B7D,IAAIM,SAAQ,CAACC,EAASC,KACLC,KAAKC,SAAW,GAGpCH,EAAQ,C,SAAEH,EAAUO,MAAAN,IAEpBG,EAAO,C,SAAEJ,EAAUO,MAAAN,GAAQ,KA/BxBO,MAAK,EAACR,SAAEA,EAAUO,MAAAE,MACjB5B,EAAA6B,OAAOC,QAAQ,qBAAqBX,QAAeS,MAAW,CAC5DG,cAAc,EACdC,cAAc,GACd,IAEHC,OAAM,EAACd,SAAEA,EAAUO,MAAAQ,MAClBlC,EAAA6B,OAAOM,QAAQ,oBAAoBhB,QAAee,MAAW,CAC3DH,cAAc,EACdC,cAAc,GACd,IAENjB,GAAY,EACZE,WAAWC,EAAGX,EAAKM,QAGjBE,EAAWP,EAAOK,QACpBuB,cAAcpB,GACdd,EAAKmC,QACLhC,EAASiC,gBAAgB,Y,GAE1BhC,EAAMO,MAAM","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\nconst fieldset = document.querySelector('.fieldset');\nconst delay = document.querySelector('[name=\"delay\"]');\nconst step = document.querySelector('[name=\"step\"]');\nconst amount = document.querySelector('[name=\"amount\"]');\nconst submitButton = document.querySelector('[type=\"submit\"]');\n\nform.addEventListener('submit', e => e.preventDefault());\n\nsubmitButton.addEventListener('click', () => {\n  if (!(delay.value >= 0 && step.value >= 0 && amount.value > 0)) {\n    return;\n  }\n\n  fieldset.setAttribute('disabled', true);\n\n  let position = 1;\n\n  const interval = setTimeout(function f() {\n    if (position <= amount.value) {\n      createPromise(position, +delay.value + step.value * (position - 1))\n        .then(({ position, delay }) => {\n          Notify.success(`Fulfilled promise ${position} in ${delay}ms`, {\n            clickToClose: true,\n            pauseOnHover: false,\n          });\n        })\n        .catch(({ position, delay }) => {\n          Notify.failure(`Rejected promise ${position} in ${delay}ms`, {\n            clickToClose: true,\n            pauseOnHover: false,\n          });\n        });\n      position += 1;\n      setTimeout(f, step.value);\n    }\n\n    if (position > amount.value) {\n      clearInterval(interval);\n      form.reset();\n      fieldset.removeAttribute('disabled');\n    }\n  }, delay.value);\n});\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$form","document","querySelector","$47d4ff9957288465$var$fieldset","$47d4ff9957288465$var$delay","$47d4ff9957288465$var$step","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$submitButton","addEventListener","e","preventDefault","value","setAttribute","position1","interval","setTimeout","f","position","delay3","Promise","resolve","reject","Math","random","delay","then","delay1","Notify","success","clickToClose","pauseOnHover","catch","delay2","failure","clearInterval","reset","removeAttribute"],"version":3,"file":"03-promises.ec2b8c0c.js.map"}